<div id="example" class="ui vertical segment" ng-controller="ExampleCtrl">
    <h2 class="ui dividing header">Examples</h2>

    <div class="ui right close rail">
        <div class="ui sticky">
            <div class="ui labeled icon vertical menu">
                <a class="item" ng-class="{disabled: idx >= exampleCount}"
                   ng-click="idx < exampleCount && switchExample(idx + 1)">
                    <i class="chevron up icon"></i>
                    Next
                </a>
                <div class="item">
                    <div class="ui input" ng-class="{error: gotoInputError}">
                        <input type="number" id="goto-example" placeholder="ID" min="1" max="{{exampleCount}}"
                               ng-model="gotoExampleIdx" ng-change="updateGoto()">
                    </div>
                    Goto
                </div>
                <a class="item" ng-class="{disabled: idx <= 1}"
                   ng-click="idx > 1 && switchExample(idx - 1)">
                    <i class="chevron down icon"></i>
                    Previous
                </a>
                <div class="item">
                    <div class="ui fitted toggle checkbox">
                        <input type="checkbox" ng-model="showOracleVar" ng-change="updateVarName()">
                        <label></label>
                    </div>
                    Oracle Var
                </div>
            </div>
        </div>
    </div>

    <h3 class="ui header">Example {{idx}} / {{exampleCount}}</h3>

    <div class="ui styled fluid accordion">
        <div class="active title">
            <i class="dropdown icon"></i>
            Metadata
        </div>
        <div class="active content" ng-init="meta = example.meta_data">
            <ul>
                <li>Repository: <a href="https://github.com/{{meta.repo}}">{{meta.repo}}</a>
                </li>
                <li>Binary Hash: {{meta.sha}}</li>
            </ul>
        </div>

        <div class="active title">
            <i class="dropdown icon"></i>
            Metric Summary
        </div>
        <div class="active content" ng-init="meta = example.meta_data">
            <ng-metric-table values="metricValues" metrics="metricDescriptions" names="predNames"></ng-metric-table>
        </div>

        <div class="active title" ng-repeat-start="set in srcTgt">
            <i class="dropdown icon"></i>
            {{set[1]}}
        </div>
        <div class="active content" ng-repeat-end ng-init="data = set[2]">
            <pre id="{{set[0]}}-code" class="language-c"><code>{{data.code}}</code></pre>
            <ul>
                <li>Function name: <code>{{data.func_name}}</code></li>
                <li>Return type: <code>{{data.ret_type}}</code></li>
                <li>Arguments:
                    <ul>
                        <li ng-repeat="arg in example.src.args"><code>{{arg[0]}}</code>: <code>{{arg[1]}}</code></li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="active title" ng-repeat-start="data in example.preds" ng-init="predIdx = $index">
            <i class="dropdown icon"></i>
            {{data['source']}}
        </div>
        <ng-hypothesis data="data" target="example.tgt" ng-repeat-end/>
    </div>
</div>
<script type="text/javascript">
    $(".ui.sticky").sticky({
        offset: 200,
        observeChanges: true,
        context: "#example",
        scrollContext: ".main",
    });
    $('.ui.accordion').accordion({
        exclusive: false,
    });
</script>
